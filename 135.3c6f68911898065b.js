"use strict";(self.webpackChunkadminDesign=self.webpackChunkadminDesign||[]).push([[135],{8135:(pe,Z,n)=>{n.r(Z),n.d(Z,{CourseModule:()=>ae});var m=n(9808),p=n(2653),d=n(4521),o=n(3075),c=n(9783),A=n(4327),e=n(5e3),b=n(9366),y=n(6102),_=n(230),q=n(5620),h=n(2081),C=n(4376),g=n(7322),T=n(7531),f=n(845),v=n(9114),N=n(5787),I=n(4119);function M(s,a){1&s&&(e.TgZ(0,"mat-error",44),e._uU(1,"Course Name is required"),e.qZA())}function F(s,a){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,M,2,0,"mat-error",43),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.courseNameFormGroup.controls.fullName.errors.required)}}function U(s,a){1&s&&(e.TgZ(0,"div",10),e.TgZ(1,"mat-form-field",18),e._UZ(2,"input",45),e.qZA(),e.qZA())}function S(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveCourse()}),e.TgZ(1,"i",46),e._uU(2," Save "),e.qZA(),e.qZA()}}function w(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateCourse()}),e.TgZ(1,"i",46),e._uU(2," Update "),e.qZA(),e.qZA()}}function D(s,a){1&s&&(e.TgZ(0,"h3"),e._uU(1,"Header Content"),e.qZA())}function G(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(52).reject()}),e.qZA(),e.TgZ(1,"button",48),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(52).accept()}),e.qZA()}}function E(s,a){1&s&&e._UZ(0,"div",49)}function k(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(64).exportCSV()}),e.qZA(),e.TgZ(1,"button",51),e.NdJ("click",function(){return e.CHM(t),e.oxw().exportExcel()}),e._uU(2,"Excel"),e.qZA(),e.TgZ(3,"div",49),e.TgZ(4,"button",52),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),u=e.MAs(64);return i.clear(u)}),e.qZA(),e.TgZ(5,"span",53),e._UZ(6,"i",54),e.TgZ(7,"input",55),e.NdJ("input",function(i){e.CHM(t);const u=e.oxw(),l=e.MAs(64);return u.applyFilterGlobal(i,"contains",l)}),e.qZA(),e.qZA(),e.qZA()}}function J(s,a){1&s&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"ID"),e.qZA(),e.TgZ(3,"th",56),e._uU(4,"Code "),e._UZ(5,"p-sortIcon",57),e.qZA(),e.TgZ(6,"th",58),e._uU(7,"Short Name "),e._UZ(8,"p-sortIcon",59),e.qZA(),e.TgZ(9,"th",60),e._uU(10,"Full Name "),e._UZ(11,"p-sortIcon",61),e.qZA(),e.TgZ(12,"th",62),e._uU(13,"Edit "),e._UZ(14,"p-sortIcon",63),e.qZA(),e.TgZ(15,"th",64),e._uU(16,"Delete "),e._UZ(17,"p-sortIcon",65),e.qZA(),e.qZA())}function Y(s,a){if(1&s){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e.TgZ(10,"p-button",66),e.NdJ("click",function(){const u=e.CHM(t).$implicit;return e.oxw().editCourse(u)}),e.qZA(),e.qZA(),e.TgZ(11,"td"),e.TgZ(12,"p-button",67),e.NdJ("click",function(){const u=e.CHM(t).$implicit;return e.oxw().deleteCourse(u)}),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=a.$implicit;e.xp6(2),e.Oqu(t.courseId),e.xp6(2),e.Oqu(t.courseCode),e.xp6(2),e.Oqu(t.shortName),e.xp6(2),e.Oqu(t.fullName)}}function L(s,a){1&s&&e._UZ(0,"p-button",68)}const P=function(){return{height:"120px"}},R=function(){return{width:"30vw"}},j=function(){return[5,10,25,50]},O=function(){return["courseId","courseCode","shortName","fullName"]},Q=[{path:"",component:(()=>{class s{constructor(t,r,i,u,l,ue,le,ce){this.authService=t,this.messageService=r,this.activatedRoute=i,this.courseService=u,this.confirmationService=l,this.primengConfig=ue,this.storage=le,this.commonService=ce,this.dialogContent="",this.isShown=!1,this.hiddenInput=!1,this.showErrorMessage=!1,this.displayDialog=!1,this.isLinear=!1,this.visibleSidebar2=!1,this.courses=[],this.durationTypes=[],this.feeModeType=[],this.msgs=[],this.courseData={},this.courseNameFormGroup=new o.cw({feesModeTypeId:new o.NI(1,[o.kI.required]),durationTypeId:new o.NI(2,[o.kI.required]),fullName:new o.NI(null,[o.kI.required,o.kI.maxLength(100),o.kI.minLength(5)]),courseCode:new o.NI(null,[o.kI.required,o.kI.maxLength(100),o.kI.minLength(2)]),shortName:new o.NI(null,[o.kI.required,o.kI.maxLength(100),o.kI.minLength(3)]),courseDuration:new o.NI,description:new o.NI,courseId:new o.NI}),this.loading=!1,this.cols=[{field:"courseId",header:"Course ID",customExportHeader:"Course Code"},{field:"courseCode"},{field:"shortName"},{field:"fullName"},{field:"courseDuration"},{field:"description"}],this.activatedRoute.data.subscribe(x=>{this.courses=x.courseResolverData.courses.data,this.durationTypes=x.courseResolverData.durationTypes.data})}ngOnInit(){this.courseService.getCourseUpdateListener().subscribe(t=>{this.courses=t}),this.feeModeType=[{value:1,name:"Monthly"},{value:2,name:"Single"}]}deleteCourse(t){this.confirmationService.confirm({message:"Do you want to Update this record?",header:"Delete Confirmation",icon:"pi pi-info-circle",accept:()=>{let r=this.courses.findIndex(i=>i.courseId===t.courseId);console.log("Array: ",this.courses),console.log("courseData: ",t.courseId),this.courseService.deleteCourse(t.courseId).subscribe(i=>{console.log("index...1:",i.success),-1!=r&&(this.courses.splice(r,1),console.log("index...",r))},i=>{this.showErrorMessage=!0,this.errorMessage=i.message,setTimeout(()=>{this.showErrorMessage=!1},2e4),this.showError(i.statusText)})},reject:()=>{this.msgs=[{severity:"info",summary:"Rejected",detail:"You have rejected"}]}})}updateCourse(){this.confirmationService.confirm({message:"Do you want to Update this record?",header:"Delete Confirmation",icon:"pi pi-info-circle",accept:()=>{this.courseData.courseId=this.courseNameFormGroup.value.courseId,this.courseData.feesModeTypeId=this.courseNameFormGroup.value.feesModeTypeId,this.courseData.durationTypeId=this.courseNameFormGroup.value.durationTypeId,this.courseData.fullName=this.courseNameFormGroup.value.fullName,this.courseData.courseCode=this.courseNameFormGroup.value.courseCode,this.courseData.shortName=this.courseNameFormGroup.value.shortName,this.courseData.courseDuration=this.courseNameFormGroup.value.courseDuration,this.courseData.description=this.courseNameFormGroup.value.description,this.courseService.updateCourse(this.courseData).subscribe(t=>{!0===t.status&&this.showSuccess("Record Updated successfully")},t=>{this.showErrorMessage=!0,this.errorMessage=t.message,setTimeout(()=>{this.showErrorMessage=!1},2e4),this.showError(t.statusText)})},reject:()=>{this.msgs=[{severity:"info",summary:"Rejected",detail:"You have rejected"}]}})}saveCourse(){this.confirmationService.confirm({message:"Do you want to Save this record?",header:"Delete Confirmation",icon:"pi pi-info-circle",accept:()=>{this.courseData.feesModeTypeId=this.courseNameFormGroup.value.feesModeTypeId,this.courseData.durationTypeId=this.courseNameFormGroup.value.durationTypeId,this.courseData.fullName=this.courseNameFormGroup.value.fullName,this.courseData.courseCode=this.courseNameFormGroup.value.courseCode,this.courseData.shortName=this.courseNameFormGroup.value.shortName,this.courseData.courseDuration=this.courseNameFormGroup.value.courseDuration,this.courseData.description=this.courseNameFormGroup.value.description,this.courseService.saveCourse(this.courseData).subscribe(t=>{""!=t.success&&(this.showSuccess("Record added successfully"),console.log("success:",t.success))},t=>{this.showErrorMessage=!0,this.errorMessage=t.message,setTimeout(()=>{this.showErrorMessage=!1},2e4),this.showError(t.statusText)})},reject:()=>{this.msgs=[{severity:"info",summary:"Rejected",detail:"You have rejected"}]}})}clearCourse(){this.isShown=!1,this.courseNameFormGroup=new o.cw({feesModeTypeId:new o.NI(1,[o.kI.required]),durationTypeId:new o.NI(2,[o.kI.required]),fullName:new o.NI(null,[o.kI.required,o.kI.maxLength(100),o.kI.minLength(5)]),courseCode:new o.NI(null,[o.kI.required,o.kI.maxLength(100),o.kI.minLength(2)]),shortName:new o.NI(null,[o.kI.required,o.kI.maxLength(100),o.kI.minLength(3)]),courseDuration:new o.NI,description:new o.NI,courseId:new o.NI})}editCourse(t){console.log(t),this.isShown=!0,this.courseNameFormGroup.patchValue({courseId:t.courseId}),this.courseNameFormGroup.patchValue({feesModeTypeId:t.feesModeType.feesModeTypeId}),this.courseNameFormGroup.patchValue({durationTypeId:t.durationTypeId}),this.courseNameFormGroup.patchValue({fullName:t.fullName}),this.courseNameFormGroup.patchValue({courseCode:t.courseCode}),this.courseNameFormGroup.patchValue({shortName:t.shortName}),this.courseNameFormGroup.patchValue({courseDuration:t.courseDuration}),this.courseNameFormGroup.patchValue({description:t.description}),console.log(t)}showSuccess(t){this.messageService.add({severity:"success",summary:"Success",detail:t})}showError(t){this.messageService.add({severity:"error",summary:"Success",detail:t})}clear(t){t.clear()}getEventValue(t){return t.target.value}applyFilterGlobal(t,r,i){i.filterGlobal(t.target.value,"contains")}exportExcel(){Promise.resolve().then(n.t.bind(n,5239,23)).then(t=>{const i={Sheets:{data:t.utils.json_to_sheet(this.courses)},SheetNames:["data"]},u=t.write(i,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(u,"products")})}saveAsExcelFile(t,r){const l=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});A.saveAs(l,r+"_export_"+(new Date).getTime()+".xlsx")}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(b.e),e.Y36(c.ez),e.Y36(d.gz),e.Y36(y.N),e.Y36(c.YP),e.Y36(c.b4),e.Y36(_.BU),e.Y36(q.v))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-course"]],features:[e._Bn([c.YP,c.ez])],decls:77,vars:30,consts:[[1,"d-flex","flex-row","bd-highlight","mb-3",2,"height","200vh"],[1,"p-2","bd-highlight"],[1,"card"],[1,"card-header","p-3","mt-2"],[2,"color","#1e293b","font-size","36px"],[1,"card-body"],[1,"course-form",3,"linear"],["stepper",""],["label","Name",3,"stepControl"],[3,"formGroup"],[1,"form-group"],[1,"p-2","col-8","bd-highlight"],["fxFlex","100","bindLabel","name","bindValue","value","appendTo","body","formControlName","feesModeTypeId","placeholder","Fees Mode",1,"custom",3,"items"],[1,"d-flex","flex-row","bd-highlight","mb-3"],[1,"p-2","col-4","bd-highlight"],[2,"width","100%"],["matInput","","formControlName","courseCode","placeholder","C0001","required",""],["matInput","","formControlName","shortName","placeholder","Short Name","required",""],[1,"col-12"],["matInput","","placeholder","Course Full Name","formControlName","fullName"],[4,"ngIf"],["class","form-group",4,"ngIf"],["matInput","","formControlName","courseDuration","placeholder","100","required",""],[1,"p-2","col-4","bd-highlight",2,"height","40%"],["bindLabel","durationName","bindValue","durationTypeId","formControlName","durationTypeId","autofocus","","appendTo","body","placeholder","Duration Type",1,"custom",3,"items"],["formControlName","description",1,"col-12"],["align","right"],["pButton","",3,"click"],[1,"bi","bi-clear",2,"font-size","1rem"],["pButton","",3,"click",4,"ngIf"],["header","Confirmation","icon","pi pi-exclamation-triangle",3,"transitionOptions"],["cd",""],["pTemplate","header"],["pTemplate","footer"],[1,"card-header"],[1,"d-flex","bd-highlight","mb-3"],[2,"color","#1e293b"],["selectionMode","multiple","dataKey","courseId","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","styleClass","p-datatable-striped",3,"value","columns","selection","paginator","rows","showCurrentPageReport","loading","rowsPerPageOptions","globalFilterFields","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","body"],["pTemplate","paginatorleft"],[1,"p-2","bd-highlight","col-3",2,"background-color","#e7e709"],["class","text-right",4,"ngIf"],[1,"text-right"],["matInput","","placeholder","Course ID","formControlName","courseId"],[1,"bi","bi-save",2,"font-size","1rem"],["type","button","pButton","","icon","pi pi-times","label","No",3,"click"],["type","button","pButton","","icon","pi pi-check","label","Yes",3,"click"],[1,"flex"],["type","button","pButton","","pRipple","","icon","pi pi-file","pTooltip","CSV","tooltipPosition","bottom",1,"mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","mr-2",3,"click"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined",3,"click"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search keyword",3,"input"],["pSortableColumn","courseCode"],["field","courseCode"],["pSortableColumn","shortName"],["field","shortName"],["pSortableColumn","fullName"],["field","fullName"],["pSortableColumn","edit"],["field","edit"],["pSortableColumn","delete"],["field","delete"],["type","button","icon","pi pi-pencil","styleClass","p-button-text",3,"click"],["type","button","icon","pi pi-trash","styleClass","p-button-text",3,"click"],["type","button","icon","pi pi-plus","styleClass","p-button-text"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"p",4),e._uU(5,"Course Entry Form "),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div"),e.TgZ(8,"mat-stepper",6,7),e.TgZ(10,"mat-step",8),e.TgZ(11,"form",9),e.TgZ(12,"div",10),e.TgZ(13,"div",11),e._UZ(14,"ng-select",12),e.qZA(),e.TgZ(15,"div",13),e.TgZ(16,"div",14),e.TgZ(17,"mat-form-field",15),e.TgZ(18,"mat-label"),e._uU(19,"Course Code"),e.qZA(),e._UZ(20,"input",16),e.qZA(),e.qZA(),e.TgZ(21,"div",11),e.TgZ(22,"mat-form-field",15),e.TgZ(23,"mat-label"),e._uU(24,"Short Name"),e.qZA(),e._UZ(25,"input",17),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"mat-form-field",18),e._UZ(27,"input",19),e.YNc(28,F,2,1,"div",20),e.qZA(),e.qZA(),e.YNc(29,U,3,0,"div",21),e.TgZ(30,"div",10),e.TgZ(31,"div",13),e.TgZ(32,"div",11),e.TgZ(33,"mat-form-field",15),e.TgZ(34,"mat-label"),e._uU(35,"Duration:"),e.qZA(),e._UZ(36,"input",22),e.qZA(),e.qZA(),e.TgZ(37,"div",23),e._UZ(38,"ng-select",24),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"div",10),e.TgZ(40,"h5"),e._uU(41,"Description"),e.qZA(),e.TgZ(42,"textarea",25),e._uU(43,"\n                                    "),e.qZA(),e.qZA(),e.TgZ(44,"div",26),e.TgZ(45,"button",27),e.NdJ("click",function(){return r.clearCourse()}),e.TgZ(46,"i",28),e._uU(47," Clear "),e.qZA(),e.qZA(),e._uU(48,"\xa0\xa0\xa0 "),e.YNc(49,S,3,0,"button",29),e.YNc(50,w,3,0,"button",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"p-confirmDialog",30,31),e.YNc(53,D,2,0,"ng-template",32),e.YNc(54,G,2,0,"ng-template",33),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(55,"div",1),e.TgZ(56,"div",2),e.TgZ(57,"div",34),e.TgZ(58,"div",35),e._UZ(59,"div",1),e.TgZ(60,"div",1),e.TgZ(61,"h3",36),e._uU(62,"Course Details"),e.qZA(),e.TgZ(63,"p-table",37,38),e.NdJ("selectionChange",function(u){return r.selectedCourses=u}),e.YNc(65,E,1,0,"ng-template",39),e.YNc(66,k,8,0,"ng-template",39),e.YNc(67,J,18,0,"ng-template",32),e.YNc(68,Y,13,4,"ng-template",40),e.YNc(69,L,1,0,"ng-template",41),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(70,"div",2),e.TgZ(71,"h1"),e._uU(72,"Student List"),e.qZA(),e.TgZ(73,"div",42),e.TgZ(74,"pre"),e._uU(75),e.ALo(76,"json"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(8),e.Q6J("linear",r.isLinear),e.xp6(2),e.Q6J("stepControl",r.courseNameFormGroup),e.xp6(1),e.Q6J("formGroup",r.courseNameFormGroup),e.xp6(3),e.Q6J("items",r.feeModeType),e.xp6(14),e.Q6J("ngIf",r.courseNameFormGroup.controls.fullName.errors&&r.courseNameFormGroup.controls.fullName.touched),e.xp6(1),e.Q6J("ngIf",r.hiddenInput),e.xp6(9),e.Q6J("items",r.durationTypes),e.xp6(4),e.Akn(e.DdM(26,P)),e.xp6(7),e.Q6J("ngIf",!r.isShown),e.xp6(1),e.Q6J("ngIf",r.isShown),e.xp6(1),e.Akn(e.DdM(27,R)),e.Q6J("transitionOptions","0.8ms"),e.xp6(12),e.Q6J("value",r.courses)("columns",r.cols)("selection",r.selectedCourses)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("loading",r.loading)("rowsPerPageOptions",e.DdM(28,j))("globalFilterFields",e.DdM(29,O)),e.xp6(12),e.hij("                courseData = ",e.lcZ(76,24,r.courseData),"\n              "))},directives:[h.Vq,h.C0,o._Y,o.JL,o.sg,C.w9,o.JJ,o.u,g.KE,g.hX,T.Nt,o.Fj,o.Q7,m.O5,g.TO,f.Hq,v.Q,c.jx,p.iA,N.H,I.u,p.lQ,p.fz,f.zx],pipes:[m.Ts],styles:[".course-form[_ngcontent-%COMP%]{min-height:50vh;min-width:50vh;background-color:#504e4e;background-image:linear-gradient(to right,#3d3a3a,#939391);border-radius:25px;box-shadow:0 10px 6px -6px #777}.p-datatable[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{text-align:left;border:1px solid #e9ecef;border-width:0 0 1px 0;padding:0}"]}),s})()}];let B=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[d.Bz.forChild(Q)],d.Bz]}),s})();var V=n(7773),H=n(6016),z=n(7423),X=n(5315),K=n(8092),$=n(8061),W=n(4036),ee=n(6856),te=n(508),oe=n(7102),se=n(2841),re=n(5223),ne=n(7401),ie=n(1079);let ae=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[m.ez,B,V.EV,T.c,o.u5,o.UX,h.T5,f.hJ,N.T,H.Z_,p.U$,z.ot,v.D,X.S,K.q,$.Q,W.kW,C.A0,ee.FA,te.XK,oe.Qy,se.KZ,I.z,re.l,ne.IJ,ie.Bb]]}),s})()}}]);