"use strict";(self.webpackChunkadminDesign=self.webpackChunkadminDesign||[]).push([[261],{9236:(_,m,r)=>{r.d(m,{M:()=>A});var t=r(5e3),l=r(7579),u=r(7295),g=r(9808),w=r(845),d=r(4119);function p(c,o){if(1&c){const i=t.EpF();t.TgZ(0,"webcam",11),t.NdJ("imageCapture",function(e){return t.CHM(i),t.oxw().handleImage(e)})("cameraSwitched",function(e){return t.CHM(i),t.oxw().cameraWasSwitched(e)})("initError",function(e){return t.CHM(i),t.oxw().handleInitError(e)}),t.qZA()}if(2&c){const i=t.oxw();t.Q6J("height",300)("width",300)("trigger",i.triggerObservable)("allowCameraSwitch",i.allowCameraSwitch)("switchCamera",i.nextWebcamObservable)("videoOptions",i.videoOptions)}}function v(c,o){1&c&&(t.TgZ(0,"h4"),t._uU(1,"Messages:"),t.qZA())}function C(c,o){if(1&c&&(t.TgZ(0,"li"),t._uU(1),t.ALo(2,"json"),t.qZA()),2&c){const i=o.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,i.message))}}let A=(()=>{class c{constructor(){this.pictureTaken=new t.vpe,this.showWebcam=!0,this.allowCameraSwitch=!0,this.multipleWebcamsAvailable=!1,this.deviceId="",this.videoOptions={},this.errors=[],this.trigger=new l.x,this.nextWebcam=new l.x}ngOnInit(){u.BF.getAvailableVideoInputs().then(i=>{this.multipleWebcamsAvailable=i&&i.length>1})}triggerSnapshot(){this.trigger.next()}toggleWebcam(){this.showWebcam=!this.showWebcam}handleInitError(i){this.errors.push(i)}showNextWebcam(i){this.nextWebcam.next(i)}handleImage(i){console.info("received webcam image",i),this.pictureTaken.emit(i)}cameraWasSwitched(i){console.log("active device: "+i),this.deviceId=i}get triggerObservable(){return this.trigger.asObservable()}get nextWebcamObservable(){return this.nextWebcam.asObservable()}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-camera"]],outputs:{pictureTaken:"pictureTaken"},decls:17,vars:3,consts:[[2,"text-align","center"],["id","camera-capture",1,"p-2","bd-highlight",2,"border","1px solid black","border-radius","25px"],[3,"height","width","trigger","allowCameraSwitch","switchCamera","videoOptions","imageCapture","cameraSwitched","initError",4,"ngIf"],[1,"d-flex","flex-row","bd-highlight","mb-3",2,"align-self","center"],[1,"p-2","bd-highlight","col-6"],["type","button","pButton","","pTooltip","Take the Picture",3,"click"],[1,"bi","bi-camera-fill"],["type","button","pButton","",3,"click"],[1,"bi","bi-arrow-clockwise"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"height","width","trigger","allowCameraSwitch","switchCamera","videoOptions","imageCapture","cameraSwitched","initError"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"div"),t.TgZ(2,"div",1),t.YNc(3,p,1,6,"webcam",2),t.TgZ(4,"h5"),t._uU(5,"Webcam"),t.qZA(),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"button",5),t.NdJ("click",function(){return s.triggerSnapshot()}),t._UZ(9,"i",6),t._uU(10,"\xa0Take "),t.qZA(),t.qZA(),t.TgZ(11,"div",4),t.TgZ(12,"button",7),t.NdJ("click",function(){return s.showNextWebcam(!0)}),t._UZ(13,"i",8),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(14,v,2,0,"h4",9),t.TgZ(15,"ul"),t.YNc(16,C,3,3,"li",10),t.qZA()),2&i&&(t.xp6(3),t.Q6J("ngIf",s.showWebcam),t.xp6(11),t.Q6J("ngIf",s.errors.length>0),t.xp6(2),t.Q6J("ngForOf",s.errors))},directives:[g.O5,u.i3,w.Hq,d.u,g.sg],pipes:[g.Ts],styles:[".actionBtn[_ngcontent-%COMP%]{font-size:4em;cursor:pointer}.snapshot[_ngcontent-%COMP%]{text-align:center}.snapshot[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:800px;max-height:800px}ul.links[_ngcontent-%COMP%]{padding-bottom:20px}"]}),c})()},5261:(_,m,r)=>{r.r(m),r.d(m,{CameraModule:()=>c});var t=r(9808),l=r(4521),u=r(9236),g=r(5e3);const w=[{path:"",component:u.M}];let d=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=g.oAB({type:o}),o.\u0275inj=g.cJS({imports:[[l.Bz.forChild(w)],l.Bz]}),o})();var p=r(7295),v=r(7423),C=r(845),A=r(4119);let c=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=g.oAB({type:o}),o.\u0275inj=g.cJS({imports:[[t.ez,d,p.Tm,v.ot,C.hJ,A.z]]}),o})()},7295:(_,m,r)=>{r.d(m,{i3:()=>v,Tm:()=>A,BF:()=>p});var t=r(5e3),l=r(9808);const u=["video"],g=["canvas"];function w(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().rotateVideoInput(!0)}),t.qZA()}}class d{constructor(s,e,a){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=e,this._imageAsDataUrl=s,this._imageData=a}static getDataFromDataUrl(s,e){return s.replace(`data:${e};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=d.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}}class p{static getAvailableVideoInputs(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((s,e)=>{navigator.mediaDevices.enumerateDevices().then(a=>{s(a.filter(n=>"videoinput"===n.kind))}).catch(a=>{e(a.message||a)})}):Promise.reject("enumerateDevices() not supported.")}}let v=(()=>{class i{constructor(){this.width=640,this.height=480,this.videoOptions=i.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=i.DEFAULT_IMAGE_TYPE,this.imageQuality=i.DEFAULT_IMAGE_QUALITY,this.imageCapture=new t.vpe,this.initError=new t.vpe,this.imageClick=new t.vpe,this.cameraSwitched=new t.vpe,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(e){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=e.subscribe(()=>{this.takeSnapshot()})}set switchCamera(e){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=e.subscribe(a=>{"string"==typeof a?this.switchToVideoInput(a):this.rotateVideoInput(!1!==a)})}static getMediaConstraintsForDevice(e,a){const n=a||this.DEFAULT_VIDEO_OPTIONS;return e&&(n.deviceId={exact:e}),n}static getDeviceIdFromMediaStreamTrack(e){if(e.getSettings&&e.getSettings()&&e.getSettings().deviceId)return e.getSettings().deviceId;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().deviceId){const a=e.getConstraints().deviceId;return i.getValueFromConstrainDOMString(a)}}static getFacingModeFromMediaStreamTrack(e){if(e){if(e.getSettings&&e.getSettings()&&e.getSettings().facingMode)return e.getSettings().facingMode;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().facingMode){const a=e.getConstraints().facingMode;return i.getValueFromConstrainDOMString(a)}}}static isUserFacing(e){const a=i.getFacingModeFromMediaStreamTrack(e);return!!a&&"user"===a.toLowerCase()}static getValueFromConstrainDOMString(e){if(e){if(e instanceof String)return String(e);if(Array.isArray(e)&&Array(e).length>0)return String(e[0]);if("object"==typeof e){if(e.exact)return String(e.exact);if(e.ideal)return String(e.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(e=>{this.initError.next({message:e}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){const e=this.nativeVideoElement,a={width:this.width,height:this.height};e.videoWidth&&(a.width=e.videoWidth,a.height=e.videoHeight);const n=this.canvas.nativeElement;n.width=a.width,n.height=a.height;const f=n.getContext("2d");f.drawImage(e,0,0);const h=this.imageType?this.imageType:i.DEFAULT_IMAGE_TYPE,I=n.toDataURL(h,this.imageQuality?this.imageQuality:i.DEFAULT_IMAGE_QUALITY);let T=null;this.captureImageData&&(T=f.getImageData(0,0,n.width,n.height)),this.imageCapture.next(new d(I,h,T))}rotateVideoInput(e){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(e?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}switchToVideoInput(e){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(e,this.videoOptions)}videoResize(){}get videoWidth(){const e=this.getVideoAspectRatio();return Math.min(this.width,this.height*e)}get videoHeight(){const e=this.getVideoAspectRatio();return Math.min(this.height,this.width/e)}get videoStyleClasses(){let e="";return this.isMirrorImage()&&(e+="mirrored "),e.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){const e=this.nativeVideoElement;return e.videoWidth&&e.videoWidth>0&&e.videoHeight&&e.videoHeight>0?e.videoWidth/e.videoHeight:this.width/this.height}initWebcam(e,a){const n=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const f=i.getMediaConstraintsForDevice(e,a);navigator.mediaDevices.getUserMedia({video:f}).then(h=>{this.mediaStream=h,n.srcObject=h,n.play(),this.activeVideoSettings=h.getVideoTracks()[0].getSettings();const b=i.getDeviceIdFromMediaStreamTrack(h.getVideoTracks()[0]);this.cameraSwitched.next(b),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=b?this.availableVideoInputs.findIndex(I=>I.deviceId===b):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(h=>{this.initError.next({message:h.message,mediaStreamError:h})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let e="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?e=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(e=this.mirrorImage.x.toLowerCase())),e){case"always":return!0;case"never":return!1}}return i.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&(this.nativeVideoElement.pause(),this.mediaStream.getTracks().forEach(e=>e.stop()))}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((e,a)=>{p.getAvailableVideoInputs().then(n=>{this.availableVideoInputs=n,e(n)}).catch(n=>{this.availableVideoInputs=[],a(n)})})}}return i.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},i.DEFAULT_IMAGE_TYPE="image/jpeg",i.DEFAULT_IMAGE_QUALITY=.92,i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["webcam"]],viewQuery:function(e,a){if(1&e&&(t.Gf(u,7),t.Gf(g,7)),2&e){let n;t.iGM(n=t.CRH())&&(a.video=n.first),t.iGM(n=t.CRH())&&(a.canvas=n.first)}},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",mirrorImage:"mirrorImage",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"width","height","resize"],["video",""],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],["canvas",""],[1,"camera-switch",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return a.imageClick.next()}),t.TgZ(1,"video",1,2),t.NdJ("resize",function(){return a.videoResize()}),t.qZA(),t.YNc(3,w,1,0,"div",3),t._UZ(4,"canvas",4,5),t.qZA()),2&e&&(t.xp6(1),t.Tol(a.videoStyleClasses),t.Q6J("width",a.videoWidth)("height",a.videoHeight),t.xp6(2),t.Q6J("ngIf",a.allowCameraSwitch&&a.availableVideoInputs.length>1&&a.videoInitialized),t.xp6(1),t.Q6J("width",a.width)("height",a.height))},directives:[l.O5],styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:#0000001a;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s ease}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:#0000002e}"]}),i})(),A=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[l.ez]]}),i})()}}]);